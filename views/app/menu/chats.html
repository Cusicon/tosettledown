<% layout('/app/layout/template.html') -%>

<!-- Call Page Style Tag Here -->
<% stylesheet('/lib/css/app/chat.css') -%>
<!-- Call Style Script Tag Here -->
<% script('/lib/scripts/app/chat.js') -%>

<div class="row page-identifier" data-page-name="chat">
    <div class="displayWindow col-md-12 row Chat"
        style="border-radius: 0px; padding: 0px; border-left: 1px solid #eee; overflow: visible;">
        <section class="col-md-4 ChatList">
            <div class="ChatHead">
                <h3 class="text-muted text-center"><%= title %></h3>
                <select name="searchUsers" id="searchUsers" class="form-control mb-2"
                    style="border: 1px solid #eee !important; cursor: pointer;">
                    <option value="all">All</option>
                    <option value="online">Online</option>
                </select>
            </div>
            <div class="ChatBody">
                <ul id="chat-list-holder" class="chat-list">
                    <li class="user lazy-box-group">
                        <div class="image-holder">
                            <div class="status is-online lazy-box-loader"></div>
                            <div class="profile-img lazy-box-loader"></div>
                        </div>
                        <div class="message-holder">
                            <div class="username text-dark lazy-box-loader"></div>
                            <div class="latest-message text-muted lazy-box-loader"></div>
                        </div>
                    </li>
                    <li class="user lazy-box-group">
                        <div class="image-holder">
                            <div class="status is-online lazy-box-loader"></div>
                            <div class="profile-img lazy-box-loader"></div>
                        </div>
                        <div class="message-holder">
                            <div class="username text-dark lazy-box-loader"></div>
                            <div class="latest-message text-muted lazy-box-loader"></div>
                        </div>
                    </li>
                    <li class="user lazy-box-group">
                        <div class="image-holder">
                            <div class="status is-online lazy-box-loader"></div>
                            <div class="profile-img lazy-box-loader"></div>
                        </div>
                        <div class="message-holder">
                            <div class="username text-dark lazy-box-loader"></div>
                            <div class="latest-message text-muted lazy-box-loader"></div>
                        </div>
                    </li>
                    <li class="user lazy-box-group">
                        <div class="image-holder">
                            <div class="status is-online lazy-box-loader"></div>
                            <div class="profile-img lazy-box-loader"></div>
                        </div>
                        <div class="message-holder">
                            <div class="username text-dark lazy-box-loader"></div>
                            <div class="latest-message text-muted lazy-box-loader"></div>
                        </div>
                    </li>
                    <li class="user lazy-box-group">
                        <div class="image-holder">
                            <div class="status is-online lazy-box-loader"></div>
                            <div class="profile-img lazy-box-loader"></div>
                        </div>
                        <div class="message-holder">
                            <div class="username text-dark lazy-box-loader"></div>
                            <div class="latest-message text-muted lazy-box-loader"></div>
                        </div>
                    </li>
                </ul>
            </div>
        </section>


        <section class="col-md-8 ChatWindow">
            <div class="chat-window-holder" style="display: none;">
                <div class="ChatWindowHead">
                    <div class="float-left">
                        <div class="onMobile float-left">
                            <a href="javascript:void(0);" id="backtoChatList" class="backtoChatList"
                                style="font-size: 20px; padding: 0px 5px;">
                                <i class="icon-arrow-left"></i>
                            </a>
                        </div>
                        <div id="chat-status" class="activity_status "></div>
                        <div id="chat-profile-img" class="">
                        </div>
                        <div id="chat-username" class="text-dark">
                            <h6 id="chat-username-holder" class=""></h6>
                            <small id="chat-typing"></small>
                        </div>
                    </div>

                    <div class="float-right">
                        <span class="moreOptions">
                            <div class="dropdown">
                                <a href="#" id="dropBtn"
                                    class="btn waves-effect waves-light waves-effect waves-light dropBtn" role="button"
                                    style="color: #1a1a1a; padding: 15px 5px 10px 5px !important; margin: 0px 10px;">
                                    <i class="icon-options-vertical" style="font-size: 20px;"></i>
                                </a>

                                <div class="dropdownContent" id="dropdownContent">
                                    <a id="share" href="javascript:void(0);"
                                        onclick="share(`${location.origin}/app/profile/${activeChat}`);">
                                        Share
                                        <span class="fi-share" class="color"
                                            style="font-size: 18px; float: right !important;"></span>
                                    </a>
                                    <a id="addFavourite" href="javascript:void(0);">Add to favourites</a>
                                    <a href="#" id="giveAGift" class="hide">Give a gift</a>
                                    <a href="#" id="deleteConversation" class="hide">Delete conversation</a>
                                    <a href="#" id="blockOrReport" class="color">Block or Report</a>
                                    <div class="separator"></div>
                                    <a id="profile-link" href="javascript:void(0);" class="dropdownBottom"
                                        style="color: #000;">
                                        View profile
                                        <span class="typcn typcn-user"
                                            style="font-size: 18px; float: right !important;"></span>
                                    </a>
                                </div>
                            </div>
                        </span>
                    </div>
                </div>

                <div class="ChatWindowBody">
                    <ul class="chat-message-list">
                        <!-- chat will be rendered inside here -->
                    </ul>
                    <div class="chatAlertBelow" id="chatAlertBelow">
                        <a href="#" id="chatAlertBelowBtn" class="hide">
                            <!-- Incase user is not at the bottom of the page,
                                and there are chats coming in,
                                This will display with the amount of current messages
                                not read and go to the bottom when clicked!
                                But as of now [display: none] -->
                            <span class="badge" style="position: absolute; top: -8px; right: 0px;">52</span>
                            <i class="fi-arrow-down text-dark"></i>
                        </a>
                    </div>
                </div>

                <div class="ChatWindowFooter" style="padding: 5px 10px;">
                    <div class="form-group message-sender-holder">
                        <textarea id="message-input" class="encounter-page-send-message form-control"
                            placeholder="Type a message" autofocus required></textarea>
                        <button id="submit-msg" class="btn waves-effect waves-light bg-Primary_color">
                            <i class="fa fa-send"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="go-back-encounter text-muted" style="position: relative; top: 200px; text-align: center;">
                <div>
                    <img src="/lib/img/logo/logo-icon.png" width="150" alt="Tosettledown">
                    <h4 style="font-weight: 200;">Start chatting immediately...</h4>
                    <p>
                    <a href="/app/encounters" class="color">See encounters</a>
                    </p>
                </div>
            </div>

        </section>
    </div>
</div>